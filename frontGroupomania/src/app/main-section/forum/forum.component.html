<article *ngFor='let post of posts; let postIndex=index'>
    <div>
        <h2>{{post.titre}}</h2>
        <p>Ecrit par {{post.nom}} le {{post.date}}</p>
    </div>
    <p>{{post.texte}}</p>
    <div id='interactionBox{{postIndex}}'>
        <div class='interaction'>
            <button (click)=onAnswer(postIndex)>Répondre</button>
            <button *ngIf='nomUsager == post.nom' (click)=onEdit(postIndex)>Editer</button>
            <button *ngIf='nomUsager == post.nom' (click)=onSuppress(postIndex)>Supprimer</button>
        </div>
        <form class='userInput' #reponseMainForm="ngForm">
            <textarea required name='texte' [(ngModel)]="userInputText"></textarea>
            <button type='submit' (click)=onSubmit(postIndex) [disabled]="!reponseMainForm.form.valid">Valider</button>
        </form>
    </div>
    <div>
        <article *ngFor='let commentaire of commentaires[postIndex]; let commentaireIndex=index'>
            <p class='signature'>{{commentaire.date}}</p>
            <p>{{commentaire.texte}}</p>
            <div class='comInteractions'>
                <button>Répondre</button>
                <button>Editer</button>
                <button>Supprimer</button>
            </div>
        </article>
    </div>
</article>

<div>
    <h2>Créer une nouvelle discussion :</h2>
    <div id='interactionBox{{posts.length}}'>
        <button (click)='onNewPost(posts.length)'>Nouvelle conversation :</button>
        <form id='newPostForm' #newPostForm="ngForm">
            <label for="titre">Titre</label>
            <input type="text" [(ngModel)]="userInputTitle" placeholder="Votre titre" required ngModel name="titre" id="titre">
            <textarea required [(ngModel)]="userInputText" name='texte'></textarea>
            <button type='submit' (click)=onSubmit(0) [disabled]="!newPostForm.form.valid">Valider</button>
        </form>
    </div>
</div>